<!doctype html>
<html> 
 <head></head> 
 <body> 
  <div id="navbar" class="navbar" style="display: flex; justify-content: space-between; align-items: center;"> 
   <div class="logo"> 
    <img src="https://Siam-tech.github.io/QuantumEdge/Logo.png" width="90px"> 
   </div> <a href="https://Siam-tech.github.io/QuantumEdge/Homepage.html" style="text-decoration: none; color: black; font-size: 30px; border: 1px solid black; padding: 5px 5px; background-color: grey;">Home</a> 
  </div> <!-- Data Container --> 
  <div id="allData" style="margin-top: 70px; padding: 20px;"></div> 
  <style>
    #navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 60px;
      background-color: #4F4F4F;
      color: #00FFFF;
      display: flex;
      align-items: center;
      padding: 0 20px;
      z-index: 1000;
    }

    #navbar .logo {
      font-size: 24px;
      font-weight: bold;
    }

    .account {
      border: 2px solid #ccc;
      border-radius: 8px;
      margin: 10px 0;
      padding: 10px;
      background-color: #f9f9f9;
    }
    .Up{
      
      background-color: Blue;
      color: White;
      padding: 30px 30px;
      font-size: 30px;
      border-radius: 32px;
    }
  </style> 
  <script type="module">
  import { getDatabase, ref, get, set} from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js';
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js';

  const firebaseConfig = {
    apiKey: "AIzaSyDl1JmX8dQ4RGyKrDU_S2ZRduU_8PC3V4Q",
    authDomain: "avengers-account.firebaseapp.com",
    databaseURL: "https://avengers-account-default-rtdb.firebaseio.com",
    projectId: "avengers-account",
    storageBucket: "avengers-account.appspot.com",
    messagingSenderId: "738359469795",
    appId: "1:738359469795:web:e032337eb00df0257d47d6",
    measurementId: "G-9F4K7KVGED"
  };

  const app = initializeApp(firebaseConfig);
  const database = getDatabase(app);



  let Money = parseInt(localStorage.getItem('member-money'),10); 
  let memberID = localStorage.getItem('memberID');
  let Level = parseInt((localStorage.getItem('member-level')),10);
  
  document.getElementById('id').innerText = "ID: " + memberID;
  document.getElementById('Money').innerText = "Balance: " + Money;
  document.getElementById('Level').innerText = "Level:" + Level;     
  
  function trig(){
    
    if(Money >= 1000){
      
      Money = Money-1000;
      Level = Level+1;
      
      replaceData(Money,money,Member-money);
      replaceData(level,Level,member-level);
      
    }
    else{
      alert("You dont have enough balence:Minimal balance needed 1000$")
    }
    
  }
  
  
  function replaceData(newData,tag, storagetag) {

    const userRef = ref(database, `Money/${memberID}/tag`); // Path to the user's data

  // Replaces the entire user data with new data
     set(userRef, newData)
       .then(() => {
         var done = true;
         localStorage.setItem(storagetag,newData);
       })
       .catch((error) => {
         alert('Error deposit money:', error);
       });
}
  
window.trig = trig;
   </script> 
<div style="display: flex; justify-content: center; gap: 20px; align-items: center; padding: 20px;">
  <span style="border: 1px solid black; background-color: #f9f9f9; font-size: 30px; padding: 10px 20px; border-radius: 8px;" id="id">ID: 007</span>
  <span style="border: 1px solid black; background-color: #f9f9f9; font-size: 30px; padding: 10px 20px; border-radius: 8px;" id="Money">$100</span>
  <span style="border: 1px solid black; background-color: #f9f9f9; font-size: 30px; padding: 10px 20px; border-radius: 8px;" id="Level">Lv 5</span>
</div>
  <div style="display:flex; justify-content: center; align-items: center;length: 50vh"> 
   <h1> <big>Press the button below to level up</big> </h1> 
  </div> 
  <div style="display: flex; justify-content: center; align-items: center;"> <button onclick="trig" class="Up">Level Up</button> 
  </div> 
 </body>
</html>